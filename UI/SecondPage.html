<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Carotid Calcium Scanner</title>
    <link rel="stylesheet" href="styleSecond.css" />
    <!--This is a page I used to get the icons upload and info in the second page of the UI-->
    <script src="https://kit.fontawesome.com/e3accbbb35.js" crossorigin="anonymous"></script>
    <!-- Here is the connection between the js and html files-->
        <script src="https://unpkg.com/cornerstone-core/dist/cornerstone.min.js
"></script>
        <script src="https://unpkg.com/cornerstone-wado-image-loader"></script>
        <script src="https://unpkg.com/dicom-parser"></script>
        <script>
            cornerstoneWADOImageLoader.external.cornerstone = cornerstone;
            cornerstoneWADOImageLoader.external.dicomParser = dicomParser;

            function onDragOver(e) {

                // stop browser processing right away
                e.stopPropagation();
                e.preventDefault();

            };

            function onDrop(e) {
                // stop browser processing right away
                e.stopPropagation();
                e.preventDefault();

                var file = e.dataTransfer.files[0];

                var imageID = cornerstoneWADOImageLoader.wadouri.fileManager.add(file);

                cornerstone.loadImage(imageID).then(function (image) {
                    const viewer = document.getElementById("viewer");
                    cornerstone.enable(viewer);
                    console.log('Loaded', image);
                    const viewport = cornerstone.getDefaultViewportForImage(viewer, image);
                    cornerstone.displayImage(viewer, image, viewport);

                });

            };
            window.onload = function ()
            {
                const dropZone = document.getElementById('viewer');
                // Recommended by stackOverflow to deal with the js loading before the html.
                if (dropZone)
                {
                    dropZone.addEventListener('dragover', onDragOver);
                    dropZone.addEventListener('drop', onDrop);
                }
            };

            function DisplayDICOM()
            {
                console.log("loaded displayDICOM()");
            }


        </script>
    </head>
    <body>
        <!--The looks:-->
        <div class="back-ground">
            <!--The class "logoandmore" contains the logo, all the different buttons, and the gif that will play as
            the user is uploading the files ready for some scanning-->
            <div class="logoandmore">
                <!--Logo-->
                <img src="imag/logo1.png" class="logo" />
                <!--Drag and Drop implementation!-->
                <div class="DragAndDrop">
                    <!--Input of file; not processed just yet-->
                    <input multiple
                           type="file"
                           id="user-file"
                           onchange="DisplayDICOM();" />
                </div>
                <div id="DragAndDropOverlay">
                    <h1>DROP HERE!</h1>
                </div>
                <!--Similar with the upload button above-->
                <div class="info">
                    <i class="fa-solid fa-info"></i>
                </div>
            </div>
            <div class="viewer">
                <input multiple
                       type="file"
                       />

            </div>
        </div>

    </body>

</html>
